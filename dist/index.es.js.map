{"version":3,"file":"index.es.js","sources":["../node_modules/tslib/tslib.es6.js","../src/photo-context.ts","../src/components/Spinner.tsx","../src/utils/getSuitableImageSize.ts","../src/utils/useMountedState.ts","../src/Photo.tsx","../node_modules/lodash.debounce/index.js","../src/utils/throttle.ts","../src/utils/isTouchDevice.ts","../src/utils/getMultipleTouchPosition.ts","../src/utils/getPositionOnMoveOrScale.ts","../src/variables.ts","../src/types.ts","../src/utils/getCloseEdge.ts","../src/utils/slideToPosition.ts","../src/utils/withContinuousTap.ts","../src/utils/getAnimateOrigin.ts","../src/utils/correctSuitablePosition.ts","../src/PhotoView.tsx","../src/components/SlideWrap.tsx","../src/components/VisibleAnimationHandle.tsx","../src/components/Close.tsx","../src/components/ArrowLeft.tsx","../src/components/ArrowRight.tsx","../src/PhotoSlider.tsx","../src/PhotoProvider.tsx","../node_modules/lodash.uniqueid/index.js","../src/PhotoConsumer.tsx"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import React from 'react';\nimport { dataType } from './types';\n\nexport type onShowType = (key?: string) => void;\n\nexport type addItemType = ({ key, src, originRef, intro }: dataType) => void;\n\nexport type removeItemType = (key?: string) => void;\n\nexport interface PhotoContextType {\n  onShow: onShowType;\n  addItem: addItemType;\n  removeItem: removeItemType;\n}\n\nexport default React.createContext<PhotoContextType>({\n  onShow() {},\n  addItem() {},\n  removeItem() {},\n});\n","import React from 'react';\nimport './Spinner.less';\n\nfunction Spinner() {\n  return (\n    <div className=\"PhotoView__Spinner\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\" width=\"36\" height=\"36\" fill=\"white\">\n        <path opacity=\".25\" d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\" />\n        <path d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\" />\n      </svg>\n    </div>\n  );\n}\n\nexport default Spinner;\n","/**\n * 获取图片合适的大小\n */\nexport default function getSuitableImageSize(\n  naturalWidth: number,\n  naturalHeight: number,\n  rotate: number,\n): {\n  width: number;\n  height: number;\n  x: number;\n  y: number;\n  scale: number;\n} {\n  let width;\n  let height;\n  let y = 0;\n  let { innerWidth, innerHeight } = window;\n  const isVertical = rotate % 180 !== 0;\n\n  // 若图片不是水平则调换宽高\n  if (isVertical) {\n    [innerHeight, innerWidth] = [innerWidth, innerHeight];\n  }\n\n  const autoWidth = (naturalWidth / naturalHeight) * innerHeight;\n  const autoHeight = (naturalHeight / naturalWidth) * innerWidth;\n\n  if (naturalWidth < innerWidth && naturalHeight < innerHeight) {\n    width = naturalWidth;\n    height = naturalHeight;\n  } else if (naturalWidth < innerWidth && naturalHeight >= innerHeight) {\n    width = autoWidth;\n    height = innerHeight;\n  } else if (naturalWidth >= innerWidth && naturalHeight < innerHeight) {\n    width = innerWidth;\n    height = autoHeight;\n  } else if (naturalWidth / naturalHeight > innerWidth / innerHeight) {\n    width = innerWidth;\n    height = autoHeight;\n  }\n  // 长图模式\n  else if (naturalHeight / naturalWidth >= 3 && !isVertical) {\n    width = innerWidth;\n    height = autoHeight;\n    // 默认定位到顶部区域\n    y = (height - innerHeight) / 2;\n  } else {\n    width = autoWidth;\n    height = innerHeight;\n  }\n  return {\n    width: Math.floor(width),\n    height: Math.floor(height),\n    x: 0,\n    y,\n    scale: 1,\n  };\n}\n","import React from 'react';\n\nexport default function useMountedState(): () => boolean {\n  const mountedRef = React.useRef<boolean>(false);\n  React.useEffect(() => {\n    mountedRef.current = true;\n\n    return () => {\n      mountedRef.current = false;\n    };\n  });\n\n  return React.useCallback(() => mountedRef.current, []);\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport Spinner from './components/Spinner';\nimport getSuitableImageSize from './utils/getSuitableImageSize';\nimport useMountedState from './utils/useMountedState';\nimport './Photo.less';\nimport { brokenElementDataType } from './types';\n\nexport interface IPhotoProps extends React.HTMLAttributes<any> {\n  src: string;\n  intro?: React.ReactNode;\n  loaded: boolean;\n  broken: boolean;\n  width: number;\n  height: number;\n  rotate: number;\n  className?: string;\n  onImageLoad: (PhotoParams, callback?: Function) => void;\n  loadingElement?: JSX.Element;\n  brokenElement?: JSX.Element | ((photoProps: brokenElementDataType) => JSX.Element);\n}\n\nconst Photo: React.FC<IPhotoProps> = props => {\n  const {\n    src,\n    intro,\n    loaded,\n    broken,\n    width,\n    height,\n    rotate,\n    className,\n    onImageLoad,\n    loadingElement,\n    brokenElement,\n    ...restProps\n  } = props;\n\n  const isMounted = useMountedState();\n\n  function handleImageLoaded(e) {\n    const { naturalWidth, naturalHeight } = e.target;\n    if (isMounted()) {\n      onImageLoad({\n        loaded: true,\n        naturalWidth,\n        naturalHeight,\n        ...getSuitableImageSize(naturalWidth, naturalHeight, rotate),\n      });\n    }\n  }\n\n  function handleImageBroken() {\n    if (isMounted()) {\n      onImageLoad({\n        broken: true,\n      });\n    }\n  }\n\n  React.useEffect(() => {\n    const currPhoto = new Image();\n    currPhoto.onload = handleImageLoaded;\n    currPhoto.onerror = handleImageBroken;\n    currPhoto.src = src;\n  }, []);\n\n  if (src && !broken) {\n    if (loaded) {\n      return (\n        <img\n          className={classNames('PhotoView__Photo', className)}\n          src={src}\n          width={width}\n          height={height}\n          alt=\"\"\n          {...restProps}\n        />\n      );\n    }\n    return loadingElement || <Spinner />;\n  }\n  if (brokenElement) {\n    if (typeof brokenElement === 'function') {\n      return brokenElement({\n        src,\n        intro,\n      });\n    }\n    return brokenElement;\n  }\n  return null;\n};\n\nPhoto.displayName = 'Photo';\n\nexport default Photo;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import debounce from 'lodash.debounce';\n\n/**\n * throttle\n * @param func\n * @param wait\n */\nexport default function throttle(func, wait: number) {\n  return debounce(func, wait, {\n    leading: true,\n    maxWait: wait,\n    trailing: true,\n  });\n}\n","/**\n * 是否支持触摸设备\n */\nconst isTouchDevice = typeof document !== 'undefined' && 'ontouchstart' in document.documentElement;\n\nexport default isTouchDevice;\n","import React from 'react';\n\n/**\n * 从 Touch 事件中获取两个触控中心位置\n */\nexport default function getMultipleTouchPosition(\n  evt: React.TouchEvent,\n): {\n  clientX: number;\n  clientY: number;\n  touchLength: number;\n} {\n  const { clientX, clientY } = evt.touches[0];\n  if (evt.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = evt.touches[1];\n    return {\n      clientX: (clientX + nextClientX) / 2,\n      clientY: (clientY + nextClientY) / 2,\n      touchLength: Math.sqrt(Math.pow(nextClientX - clientX, 2) + Math.pow(nextClientY - clientY, 2)),\n    };\n  }\n  return { clientX, clientY, touchLength: 0 };\n}\n","/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale({\n  x,\n  y,\n  clientX,\n  clientY,\n  offsetX = 0,\n  offsetY = 0,\n  fromScale,\n  toScale,\n}: {\n  x: number;\n  y: number;\n  clientX: number;\n  clientY: number;\n  offsetX?: number;\n  offsetY?: number;\n  fromScale: number;\n  toScale: number;\n}): {\n  x: number;\n  y: number;\n  scale: number;\n  lastMoveClientX: number;\n  lastMoveClientY: number;\n} {\n  const { innerWidth, innerHeight } = window;\n  const centerClientX = innerWidth / 2;\n  const centerClientY = innerHeight / 2;\n  // 坐标偏移\n  const lastPositionX = centerClientX + x;\n  const lastPositionY = centerClientY + y;\n\n  // 放大偏移量\n  const offsetScale = toScale / fromScale;\n  // 偏移位置\n  const originX = clientX - (clientX - lastPositionX) * offsetScale - centerClientX;\n  const originY = clientY - (clientY - lastPositionY) * offsetScale - centerClientY;\n  return {\n    x: originX + offsetX,\n    y: originY + offsetY,\n    scale: toScale,\n    lastMoveClientX: clientX,\n    lastMoveClientY: clientY,\n  };\n}\n","/**\n * 最大触摸时间\n */\nexport const maxTouchTime: number = 200;\n\n/**\n * 最大滑动切换图片距离\n */\nexport const maxMoveOffset: number = 40;\n\n/**\n * 图片的间隔\n */\nexport const horizontalOffset: number = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset: number = 10;\n\n/**\n * 默认背景透明度\n */\nexport const defaultOpacity: number = 1;\n\n/**\n * 最小缩放度\n */\nexport const minScale: number = 1;\n\n/**\n * 最大缩放度（若图片足够大，则会超出）\n */\nexport const maxScale: number = 6;\n\n/**\n * 滑动加速度\n */\nexport const slideAcceleration: number = 0.005;\n\n/**\n * 缩放弹性缓冲\n */\nexport const scaleBuffer: number = 0.2;\n","import React from 'react';\n\n/**\n * 图片 item 类型\n */\nexport type dataType = {\n  // 唯一标识\n  key?: string;\n  // 图片地址\n  src: string;\n  // 原触发 ref\n  originRef?: HTMLElement | null;\n  // 图片介绍\n  intro?: React.ReactNode;\n};\n\n/**\n * brokenElement函数使用参数\n */\nexport type brokenElementDataType = Pick<dataType, 'src' | 'intro'>;\n\nexport type overlayRenderProps = {\n  // 图片列表\n  images: dataType[];\n  // 图片当前索引\n  index: number;\n  // 可见\n  visible: boolean;\n  // 关闭事件\n  onClose: (evt?: React.MouseEvent | React.TouchEvent) => void;\n  // 索引改变回调\n  onIndexChange: (photoIndex: number) => void;\n  // 覆盖物可见度\n  overlayVisible: boolean;\n  // 当前图片旋转角度\n  rotate: number;\n  // 旋转事件\n  onRotate: (rotate: number) => void;\n};\n\nexport interface IPhotoProviderBase {\n  // 背景可点击关闭，默认 true\n  maskClosable?: boolean;\n  // 图片点击可关闭，默认 false\n  photoClosable?: boolean;\n  // 导航条 visible，默认 true\n  bannerVisible?: boolean;\n  // 简介 visible，默认 true\n  introVisible?: boolean;\n  // 自定义渲染\n  overlayRender?: (overlayProps: overlayRenderProps) => React.ReactNode;\n  // 工具栏渲染\n  toolbarRender?: (overlayProps: overlayRenderProps) => React.ReactNode;\n  // className\n  className?: string;\n  // 遮罩 className\n  maskClassName?: string;\n  // 图片容器 className\n  viewClassName?: string;\n  // 图片 className\n  imageClassName?: string;\n  // 自定义 loading\n  loadingElement?: JSX.Element;\n  // 加载失败 Element\n  brokenElement?: JSX.Element | ((photoProps: brokenElementDataType) => JSX.Element);\n}\n\nexport type ReachMoveFunction = (reachState: ReachTypeEnum, clientX: number, clientY: number, scale?: number) => void;\n\nexport type ReachFunction = (clientX: number, clientY: number) => void;\n\nexport type PhotoTapFunction = (clientX: number, clientY: number) => void;\n\n/**\n * 边缘超出状态\n */\nexport enum CloseEdgeEnum {\n  Normal, // 正常滑动\n  Small, // 小于屏幕宽度\n  Before, // 抵触左边/上边\n  After, // 抵触右边/下边\n}\n\n/**\n * 边缘触发状态\n */\nexport enum ReachTypeEnum {\n  Normal, // 未触发\n  XReach, // x 轴\n  YReach, // y 轴\n}\n\n/**\n * 初始响应状态\n */\nexport enum TouchStartEnum {\n  Normal, // 未触发\n  X, // X 轴优先\n  YPush, // Y 轴往上\n  YPull, // Y 轴往下\n}\n\n/**\n * 动画类型\n */\nexport enum ShowAnimateEnum {\n  None, // 无\n  In, // 进入\n  Out, // 离开\n}\n\n/**\n * 触发源位置\n */\nexport type OriginRectType =\n  | {\n      clientX: number;\n      clientY: number;\n    }\n  | undefined;\n","import { CloseEdgeEnum, ReachTypeEnum, TouchStartEnum } from '../types';\n\n/**\n * 接触左边/上边 或 右边/下边边缘\n * @param position - x/y\n * @param scale\n * @param size - width/height\n * @param innerSize - innerWidth/innerHeight\n * @return CloseEdgeEnum\n */\nexport function getClosedEdge(position: number, scale: number, size: number, innerSize: number): CloseEdgeEnum {\n  const currentWidth = size * scale;\n  // 图片超出的宽度\n  const outOffsetX = (currentWidth - innerSize) / 2;\n  if (currentWidth <= innerSize) {\n    return CloseEdgeEnum.Small;\n  } else if (position > 0 && outOffsetX - position <= 0) {\n    return CloseEdgeEnum.Before;\n  } else if (position < 0 && outOffsetX + position <= 0) {\n    return CloseEdgeEnum.After;\n  }\n  return CloseEdgeEnum.Normal;\n}\n\n/**\n * 获取接触边缘类型\n * @param initialTouchState\n * @param horizontalCloseEdge\n * @param verticalCloseEdge\n * @param reachState\n */\nexport function getReachType({\n  initialTouchState,\n  horizontalCloseEdge,\n  verticalCloseEdge,\n  reachState,\n}: {\n  initialTouchState: TouchStartEnum;\n  horizontalCloseEdge: CloseEdgeEnum;\n  verticalCloseEdge: CloseEdgeEnum;\n  reachState: ReachTypeEnum;\n}): ReachTypeEnum {\n  if ((horizontalCloseEdge > 0 && initialTouchState === TouchStartEnum.X) || reachState === ReachTypeEnum.XReach) {\n    return ReachTypeEnum.XReach;\n  } else if (\n    (verticalCloseEdge > 0 &&\n      (initialTouchState === TouchStartEnum.YPull || initialTouchState === TouchStartEnum.YPush)) ||\n    reachState === ReachTypeEnum.YReach\n  ) {\n    return ReachTypeEnum.YReach;\n  }\n  return ReachTypeEnum.Normal;\n}\n","import { maxTouchTime, slideAcceleration } from '../variables';\nimport { CloseEdgeEnum } from '../types';\nimport { getClosedEdge } from './getCloseEdge';\n\n/**\n * 适应到合适的图片偏移量\n */\nexport default function slideToPosition({\n  x,\n  y,\n  lastX,\n  lastY,\n  width,\n  height,\n  scale,\n  rotate,\n  touchedTime,\n}: {\n  x: number;\n  y: number;\n  lastX: number;\n  lastY: number;\n  width: number;\n  height: number;\n  scale: number;\n  rotate: number;\n  touchedTime: number;\n}): {\n  x: number;\n  y: number;\n} {\n  const moveTime = Date.now() - touchedTime;\n\n  // 初始速度\n  const speedX = (x - lastX) / moveTime;\n  const speedY = (y - lastY) / moveTime;\n\n  // 停下所消耗时间\n  const slideTimeX = Math.abs(speedX / slideAcceleration);\n  const slideTimeY = Math.abs(speedY / slideAcceleration);\n\n  // 计划滑动位置\n  let planX = Math.floor(x + speedX * slideTimeX);\n  let planY = Math.floor(y + speedY * slideTimeY);\n\n  // 若图片不是水平则调换属性\n  if (rotate % 180 !== 0) {\n    [width, height] = [height, width];\n  }\n\n  let currentX = planX;\n  let currentY = planY;\n\n  const { innerWidth, innerHeight } = window;\n  // 图片超出的长度\n  const outOffsetX = (width * scale - innerWidth) / 2;\n  const outOffsetY = (height * scale - innerHeight) / 2;\n\n  const horizontalCloseEdge = getClosedEdge(planX, scale, width, innerWidth);\n  const verticalCloseEdge = getClosedEdge(planY, scale, height, innerHeight);\n\n  // x\n  if (horizontalCloseEdge === CloseEdgeEnum.Small) {\n    currentX = 0;\n  } else if (horizontalCloseEdge === CloseEdgeEnum.Before) {\n    currentX = outOffsetX;\n  } else if (horizontalCloseEdge === CloseEdgeEnum.After) {\n    currentX = -outOffsetX;\n  }\n  // y\n  if (verticalCloseEdge === CloseEdgeEnum.Small) {\n    currentY = 0;\n  } else if (verticalCloseEdge === CloseEdgeEnum.Before) {\n    currentY = outOffsetY;\n  } else if (verticalCloseEdge === CloseEdgeEnum.After) {\n    currentY = -outOffsetY;\n  }\n\n  // 时间过长\n  if (\n    moveTime >= maxTouchTime &&\n    horizontalCloseEdge === CloseEdgeEnum.Normal &&\n    verticalCloseEdge === CloseEdgeEnum.Normal\n  ) {\n    return {\n      x,\n      y,\n    };\n  }\n  return {\n    x: currentX,\n    y: currentY,\n  };\n}\n","import debounce from 'lodash.debounce';\n\nexport type TapFuncType<T> = (...args: T[]) => void;\n\n/**\n * 单击和双击事件处理\n * @param singleTap - 单击事件\n * @param doubleTap - 双击事件\n * @return invokeTap\n */\nexport default function withContinuousTap<T>(singleTap: TapFuncType<T>, doubleTap: TapFuncType<T>): TapFuncType<T> {\n  // 当前连续点击次数\n  let continuousClick = 0;\n\n  const withDebounceTap = debounce((...args) => {\n    continuousClick = 0;\n    singleTap(...args);\n  }, 300);\n\n  return function invokeTap(...args) {\n    continuousClick += 1;\n    withDebounceTap(...args);\n    // 双击\n    if (continuousClick >= 2) {\n      withDebounceTap.cancel();\n      continuousClick = 0;\n      doubleTap(...args);\n    }\n  };\n}\n","import { OriginRectType } from '../types';\n\nexport default function getAnimateOrigin(\n  originRect: OriginRectType,\n  width: number,\n  height: number,\n): string | undefined {\n  if (originRect) {\n    const { innerWidth, innerHeight } = window;\n\n    const xOrigin = (width - innerWidth) / 2 + originRect.clientX;\n    const yOrigin = (height - innerHeight) / 2 + originRect.clientY;\n\n    return `${xOrigin}px ${yOrigin}px`;\n  }\n\n  return undefined;\n}\n","/**\n * 纠正缩放后偏离中心区域位置\n */\nexport default function correctSuitablePosition({\n  x,\n  y,\n  scale,\n}: {\n  x: number;\n  y: number;\n  scale: number;\n}): { x: number; y: number } {\n  if (scale <= 1) {\n    return {\n      x: 0,\n      y: 0,\n    };\n  }\n  return {\n    x,\n    y,\n  };\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport Photo from './Photo';\nimport throttle from './utils/throttle';\nimport isTouchDevice from './utils/isTouchDevice';\nimport getMultipleTouchPosition from './utils/getMultipleTouchPosition';\nimport getPositionOnMoveOrScale from './utils/getPositionOnMoveOrScale';\nimport slideToPosition from './utils/slideToPosition';\nimport { getReachType, getClosedEdge } from './utils/getCloseEdge';\nimport withContinuousTap, { TapFuncType } from './utils/withContinuousTap';\nimport getAnimateOrigin from './utils/getAnimateOrigin';\nimport { maxScale, minStartTouchOffset, minScale, scaleBuffer } from './variables';\nimport {\n  ReachMoveFunction,\n  ReachFunction,\n  PhotoTapFunction,\n  ReachTypeEnum,\n  TouchStartEnum,\n  ShowAnimateEnum,\n  OriginRectType,\n  brokenElementDataType,\n} from './types';\nimport './PhotoView.less';\nimport getSuitableImageSize from './utils/getSuitableImageSize';\nimport correctSuitablePosition from './utils/correctSuitablePosition';\n\nexport interface IPhotoViewProps {\n  // 图片地址\n  src: string;\n  // 介绍\n  intro?: React.ReactNode;\n  // 容器类名\n  viewClassName?: string;\n  // 图片类名\n  className?: string;\n  // style\n  style?: object;\n  // 自定义 loading\n  loadingElement?: JSX.Element;\n  // 加载失败 Element\n  brokenElement?: JSX.Element | ((photoProps: brokenElementDataType) => JSX.Element);\n  // 旋转状态\n  rotate: number;\n\n  // Photo 点击事件\n  onPhotoTap: PhotoTapFunction;\n  // Mask 点击事件\n  onMaskTap: PhotoTapFunction;\n  // 到达边缘滑动事件\n  onReachMove: ReachMoveFunction;\n  // 触摸解除事件\n  onReachUp: ReachFunction;\n  // Resize 事件\n  onPhotoResize?: () => void;\n  // 是否在当前操作中\n  isActive: boolean;\n\n  // 动画类型\n  showAnimateType?: ShowAnimateEnum;\n  // 动画源位置\n  originRect?: OriginRectType;\n}\n\nconst initialState = {\n  // 真实宽度\n  naturalWidth: 1,\n  // 真实高度\n  naturalHeight: 1,\n  // 宽度\n  width: 1,\n  // 高度\n  height: 1,\n  // 加载成功状态\n  loaded: false,\n  // 破碎状态\n  broken: false,\n\n  // 图片 X 偏移量\n  x: 0,\n  // 图片 y 偏移量\n  y: 0,\n  // 图片缩放程度\n  scale: 1,\n  // 图片处于触摸的状态\n  touched: false,\n  // 背景处于触摸状态\n  maskTouched: false,\n\n  // 触摸开始时 x 原始坐标\n  clientX: 0,\n  // 触摸开始时 y 原始坐标\n  clientY: 0,\n\n  // 触摸开始时图片 x 偏移量\n  lastX: 0,\n  // 触摸开始时图片 y 偏移量\n  lastY: 0,\n  // 上一个触摸状态 x 原始坐标\n  lastMoveClientX: 0,\n  // 上一个触摸状态 y 原始坐标\n  lastMoveClientY: 0,\n\n  // 触摸开始时时间\n  touchedTime: 0,\n  // 多指触控间距\n  lastTouchLength: 0,\n\n  // 当前边缘触发状态\n  reachState: ReachTypeEnum.Normal,\n};\n\nexport default class PhotoView extends React.Component<IPhotoViewProps, typeof initialState> {\n  static displayName = 'PhotoView';\n\n  readonly state = initialState;\n  // 初始响应状态\n  private initialTouchState = TouchStartEnum.Normal;\n\n  private readonly handlePhotoTap: TapFuncType<number>;\n\n  constructor(props: IPhotoViewProps) {\n    super(props);\n    this.onMove = throttle(this.onMove, 8);\n    this.handleResize = throttle(this.handleResize, 8);\n    // 单击与双击事件处理\n    this.handlePhotoTap = withContinuousTap(this.onPhotoTap, this.onDoubleTap);\n  }\n\n  componentDidMount() {\n    if (isTouchDevice) {\n      window.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n      window.addEventListener('touchend', this.handleTouchEnd, { passive: false });\n    } else {\n      window.addEventListener('mousemove', this.handleMouseMove);\n      window.addEventListener('mouseup', this.handleMouseUp);\n    }\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  componentDidUpdate(prevProps: Readonly<IPhotoViewProps>) {\n    const { rotate } = this.props;\n    if (rotate !== prevProps.rotate) {\n      const { naturalWidth, naturalHeight } = this.state;\n      this.setState(getSuitableImageSize(naturalWidth, naturalHeight, rotate));\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('touchmove', this.handleTouchMove);\n    window.removeEventListener('touchend', this.handleTouchEnd);\n    window.removeEventListener('mousemove', this.handleMouseMove);\n    window.removeEventListener('mouseup', this.handleMouseUp);\n    window.removeEventListener('resize', this.handleResize);\n  }\n\n  handleImageLoad = imageParams => {\n    this.setState(imageParams);\n  };\n\n  handleResize = () => {\n    const { onPhotoResize, rotate } = this.props;\n    const { loaded, naturalWidth, naturalHeight } = this.state;\n    if (loaded) {\n      this.setState(getSuitableImageSize(naturalWidth, naturalHeight, rotate));\n      if (onPhotoResize) {\n        onPhotoResize();\n      }\n    }\n  };\n\n  handleStart = (clientX: number, clientY: number, touchLength: number = 0) => {\n    this.setState(prevState => ({\n      touched: true,\n      clientX,\n      clientY,\n      lastMoveClientX: clientX,\n      lastMoveClientY: clientY,\n      lastX: prevState.x,\n      lastY: prevState.y,\n      lastTouchLength: touchLength,\n      touchedTime: Date.now(),\n    }));\n  };\n\n  onMove = (newClientX: number, newClientY: number, touchLength: number = 0) => {\n    const { onReachMove, isActive, rotate } = this.props;\n    const {\n      naturalWidth,\n      x,\n      y,\n      clientX,\n      clientY,\n      lastMoveClientX,\n      lastMoveClientY,\n      lastX,\n      lastY,\n      scale,\n      lastTouchLength,\n      reachState,\n      touched,\n      maskTouched,\n    } = this.state;\n    if ((touched || maskTouched) && isActive) {\n      let { width, height } = this.state;\n      // 若图片不是水平则调换属性\n      if (rotate % 180 !== 0) {\n        [width, height] = [height, width];\n      }\n      // 单指最小缩放下，以初始移动距离来判断意图\n      if (touchLength === 0 && this.initialTouchState === TouchStartEnum.Normal) {\n        const isStillX = Math.abs(newClientX - clientX) <= minStartTouchOffset;\n        const isStillY = Math.abs(newClientY - clientY) <= minStartTouchOffset;\n        // 初始移动距离不足\n        if (isStillX && isStillY) {\n          // 方向记录上次移动距离，以便平滑过渡\n          this.setState({\n            lastMoveClientX: newClientX,\n            lastMoveClientY: newClientY,\n          });\n          return;\n        }\n        // 设置响应状态\n        this.initialTouchState = !isStillX\n          ? TouchStartEnum.X\n          : newClientY > clientY\n            ? TouchStartEnum.YPull\n            : TouchStartEnum.YPush;\n      }\n\n      let offsetX = newClientX - lastMoveClientX;\n      let offsetY = newClientY - lastMoveClientY;\n      // 边缘触发状态\n      let currentReachState = ReachTypeEnum.Normal;\n      if (touchLength === 0) {\n        // 边缘超出状态\n        const horizontalCloseEdge = getClosedEdge(offsetX + lastX, scale, width, window.innerWidth);\n        const verticalCloseEdge = getClosedEdge(offsetY + lastY, scale, height, window.innerHeight);\n        // 边缘触发检测\n        currentReachState = getReachType({\n          initialTouchState: this.initialTouchState,\n          horizontalCloseEdge,\n          verticalCloseEdge,\n          reachState,\n        });\n\n        // 接触边缘\n        if (currentReachState != ReachTypeEnum.Normal) {\n          onReachMove(currentReachState, newClientX, newClientY, scale);\n        }\n      }\n      // 横向边缘触发、背景触发禁用当前滑动\n      if (currentReachState === ReachTypeEnum.XReach || maskTouched) {\n        this.setState({\n          reachState: ReachTypeEnum.XReach,\n        });\n      } else {\n        // 目标倍数\n        const endScale = scale + ((touchLength - lastTouchLength) / 100 / 2) * scale;\n        // 限制最大倍数和最小倍数\n        const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth / width)), minScale - scaleBuffer);\n        this.setState({\n          lastTouchLength: touchLength,\n          reachState: currentReachState,\n          ...getPositionOnMoveOrScale({\n            x,\n            y,\n            clientX: newClientX,\n            clientY: newClientY,\n            offsetX,\n            offsetY,\n            fromScale: scale,\n            toScale,\n          }),\n        });\n      }\n    }\n  };\n\n  onPhotoTap = (clientX: number, clientY: number) => {\n    const { onPhotoTap } = this.props;\n    if (onPhotoTap) {\n      onPhotoTap(clientX, clientY);\n    }\n  };\n\n  onDoubleTap: TapFuncType<number> = (clientX, clientY) => {\n    const { width, naturalWidth, x, y, scale, reachState } = this.state;\n    if (reachState !== ReachTypeEnum.Normal) {\n      return;\n    }\n    const position = getPositionOnMoveOrScale({\n      x,\n      y,\n      clientX,\n      clientY,\n      fromScale: scale,\n      // 若图片足够大，则放大适应的倍数\n      toScale: scale !== 1 ? 1 : Math.max(2, naturalWidth / width),\n    });\n    this.setState({\n      clientX,\n      clientY,\n      ...position,\n      ...correctSuitablePosition(position),\n    });\n  };\n\n  handleWheel = e => {\n    e.stopPropagation();\n    const { clientX, clientY, deltaY } = e;\n    const { width, naturalWidth, reachState } = this.state;\n    if (reachState !== ReachTypeEnum.Normal) {\n      return;\n    }\n    this.setState(({ x, y, scale }) => {\n      const endScale = scale - deltaY / 100 / 2;\n      // 限制最大倍数和最小倍数\n      const toScale = Math.max(Math.min(endScale, Math.max(maxScale, naturalWidth / width)), minScale);\n\n      const position = getPositionOnMoveOrScale({\n        x,\n        y,\n        clientX,\n        clientY,\n        fromScale: scale,\n        toScale,\n      });\n      return {\n        clientX,\n        clientY,\n        ...position,\n        ...correctSuitablePosition(position),\n      };\n    });\n  };\n\n  handleMaskStart = (clientX: number, clientY: number) => {\n    this.setState(prevState => ({\n      maskTouched: true,\n      clientX,\n      clientY,\n      lastX: prevState.x,\n      lastY: prevState.y,\n    }));\n  };\n\n  handleMaskMouseDown = e => {\n    e.stopPropagation();\n    this.handleMaskStart(e.clientX, e.clientY);\n  };\n\n  handleMaskTouchStart = e => {\n    e.stopPropagation();\n    const { clientX, clientY } = e.touches[0];\n    this.handleMaskStart(clientX, clientY);\n  };\n\n  handleTouchStart = e => {\n    e.stopPropagation();\n    const { clientX, clientY, touchLength } = getMultipleTouchPosition(e);\n    this.handleStart(clientX, clientY, touchLength);\n  };\n\n  handleMouseDown = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.handleStart(e.clientX, e.clientY, 0);\n  };\n\n  handleTouchMove = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { clientX, clientY, touchLength } = getMultipleTouchPosition(e);\n    this.onMove(clientX, clientY, touchLength);\n  };\n\n  handleMouseMove = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.onMove(e.clientX, e.clientY);\n  };\n\n  handleUp = (newClientX: number, newClientY: number) => {\n    // 重置响应状态\n    this.initialTouchState = TouchStartEnum.Normal;\n    const { onReachUp, onPhotoTap, onMaskTap, isActive, rotate } = this.props;\n    const {\n      width,\n      height,\n      naturalWidth,\n      x,\n      y,\n      lastX,\n      lastY,\n      scale,\n      touchedTime,\n      clientX,\n      clientY,\n      touched,\n      maskTouched,\n    } = this.state;\n    if ((touched || maskTouched) && isActive) {\n      const hasMove = clientX !== newClientX || clientY !== newClientY;\n      this.setState(\n        {\n          touched: false,\n          maskTouched: false,\n          // 限制缩放\n          scale: Math.max(Math.min(scale, Math.max(maxScale, naturalWidth / width)), minScale),\n          reachState: ReachTypeEnum.Normal, // 重置触发状态\n          ...(hasMove\n            ? slideToPosition({\n              x,\n              y,\n              lastX,\n              lastY,\n              width,\n              height,\n              scale,\n              rotate,\n              touchedTime,\n            })\n            : {\n              x,\n              y,\n            }),\n        },\n        () => {\n          if (onReachUp) {\n            onReachUp(newClientX, newClientY);\n          }\n          // 触发 Tap 事件\n          if (!hasMove) {\n            if (touched && onPhotoTap) {\n              this.handlePhotoTap(newClientX, newClientY);\n            } else if (maskTouched && onMaskTap) {\n              onMaskTap(newClientX, newClientY);\n            }\n          }\n        },\n      );\n    }\n  };\n\n  handleTouchEnd = e => {\n    const { clientX, clientY } = e.changedTouches[0];\n    this.handleUp(clientX, clientY);\n  };\n\n  handleMouseUp = e => {\n    const { clientX, clientY } = e;\n    this.handleUp(clientX, clientY);\n  };\n\n  render() {\n    const {\n      src,\n      intro,\n      viewClassName,\n      className,\n      style,\n      rotate,\n      loadingElement,\n      brokenElement,\n      isActive,\n      showAnimateType,\n      originRect,\n    } = this.props;\n    const { width, height, loaded, x, y, scale, touched, broken } = this.state;\n\n    const transform = `translate3d(${x}px, ${y}px, 0) scale(${scale}) rotate(${rotate}deg)`;\n\n    return (\n      <div className={classNames('PhotoView__PhotoWrap', viewClassName)} style={style}>\n        <div\n          className=\"PhotoView__PhotoMask\"\n          onMouseDown={!isTouchDevice && isActive ? this.handleMaskMouseDown : undefined}\n          onTouchStart={isTouchDevice && isActive ? this.handleMaskTouchStart : undefined}\n        />\n        <div\n          className={classNames('PhotoView__PhotoBox', {\n            PhotoView__animateIn: loaded && showAnimateType === ShowAnimateEnum.In,\n            PhotoView__animateOut: loaded && showAnimateType === ShowAnimateEnum.Out,\n          })}\n          style={{\n            transformOrigin: loaded ? getAnimateOrigin(originRect, 0, 0) : undefined,\n          }}\n        >\n          <Photo\n            className={className}\n            src={src}\n            intro={intro}\n            width={width}\n            height={height}\n            loaded={loaded}\n            broken={broken}\n            rotate={rotate}\n            onMouseDown={isTouchDevice ? undefined : this.handleMouseDown}\n            onTouchStart={isTouchDevice ? this.handleTouchStart : undefined}\n            onWheel={this.handleWheel}\n            style={{\n              WebkitTransform: transform,\n              transform,\n              transition: touched ? undefined : 'transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1)',\n            }}\n            onImageLoad={this.handleImageLoad}\n            loadingElement={loadingElement}\n            brokenElement={brokenElement}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport classNames from 'classnames';\nimport './SlideWrap.less';\n\nconst SlideWrap: React.FC<React.HTMLAttributes<HTMLDivElement>> = ({ className, children, ...restProps }) => {\n  const dialogNode = React.useRef<HTMLElement>(document.createElement('section'));\n  const originalOverflowCallback = React.useRef('');\n\n  React.useEffect(() => {\n    document.body.appendChild(dialogNode.current);\n    const { style } = document.body;\n    originalOverflowCallback.current = style.overflow;\n    style.overflow = 'hidden';\n\n    return () => {\n      style.overflow = originalOverflowCallback.current;\n      // 清除容器\n      document.body.removeChild(dialogNode.current);\n    };\n  }, []);\n\n  return createPortal(\n    <div className={classNames('PhotoView-SlideWrap', className)} {...restProps}>\n      {children}\n    </div>,\n    dialogNode.current,\n  );\n};\n\nSlideWrap.displayName = 'SlideWrap';\n\nexport default SlideWrap;\n","import React from 'react';\nimport { dataType, OriginRectType, ShowAnimateEnum } from '../types';\n\ninterface VisibleHandleProps {\n  visible: boolean;\n  currentImage?: dataType;\n  children: ({\n    photoVisible,\n    showAnimateType,\n    originRect,\n    onShowAnimateEnd,\n  }: {\n    photoVisible: boolean;\n    showAnimateType: ShowAnimateEnum;\n    originRect: OriginRectType;\n    onShowAnimateEnd: () => void;\n  }) => JSX.Element | null;\n}\n\nexport default function VisibleAnimationHandle({ visible, currentImage, children }: VisibleHandleProps) {\n  const [photoVisible, updatePhotoVisible] = React.useState(visible);\n  const [showAnimateType, updateAnimateStatus] = React.useState<ShowAnimateEnum>(ShowAnimateEnum.None);\n  const [originRect, updateOriginRect] = React.useState<OriginRectType>();\n\n  function onShowAnimateEnd() {\n    updateAnimateStatus(ShowAnimateEnum.None);\n\n    // Close\n    if (showAnimateType === ShowAnimateEnum.Out) {\n      updatePhotoVisible(false);\n    }\n  }\n\n  React.useEffect(() => {\n    const originRef = (currentImage || {}).originRef;\n    \n    if (originRef && originRef.nodeType === 1) {\n      // 获取触发时节点位置\n      const { top, left, width, height } = originRef.getBoundingClientRect();\n      updateOriginRect({\n        clientX: left + width / 2,\n        clientY: top + height / 2,\n      });\n    } else if (originRect && !originRef) {\n      updateOriginRect(undefined);\n    }\n\n    if (visible) {\n      updateAnimateStatus(ShowAnimateEnum.In);\n      updatePhotoVisible(true);\n    } else {\n      updateAnimateStatus(ShowAnimateEnum.Out);\n    }\n  }, [visible]);\n\n  return children({\n    photoVisible,\n    showAnimateType,\n    originRect,\n    onShowAnimateEnd,\n  });\n}\n","import React from 'react';\n\nfunction Close(props) {\n  return (\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path\n        fill=\"#FFF\"\n        d=\"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z\"\n      />\n    </svg>\n  );\n}\n\nexport default Close;\n","import React from 'react';\n\nfunction ArrowLeft(props) {\n  return (\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n    </svg>\n  );\n}\n\nexport default ArrowLeft;\n","import React from 'react';\n\nfunction ArrowRight(props) {\n  return (\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n    </svg>\n  );\n}\n\nexport default ArrowRight;\n","import React from 'react';\nimport classNames from 'classnames';\nimport PhotoView from './PhotoView';\nimport SlideWrap from './components/SlideWrap';\nimport VisibleAnimationHandle from './components/VisibleAnimationHandle';\nimport Close from './components/Close';\nimport ArrowLeft from './components/ArrowLeft';\nimport ArrowRight from './components/ArrowRight';\nimport isTouchDevice from './utils/isTouchDevice';\nimport { dataType, IPhotoProviderBase, overlayRenderProps, ReachTypeEnum, ShowAnimateEnum } from './types';\nimport { defaultOpacity, horizontalOffset, maxMoveOffset } from './variables';\nimport './PhotoSlider.less';\n\nexport interface IPhotoSliderProps extends IPhotoProviderBase {\n  // 图片列表\n  images: dataType[];\n  // 图片当前索引\n  index?: number;\n  // 可见\n  visible: boolean;\n  // 关闭事件\n  onClose: (evt?: React.MouseEvent | React.TouchEvent) => void;\n  // 索引改变回调\n  onIndexChange?: Function;\n}\n\ntype PhotoSliderState = {\n  // 偏移量\n  translateX: number;\n  // 图片当前的 index\n  photoIndex: number;\n\n  // 图片处于触摸的状态\n  touched: boolean;\n  // 该状态是否需要 transition\n  shouldTransition: boolean;\n  // Reach 开始时 x 坐标\n  lastClientX: number | undefined;\n  // Reach 开始时 y 坐标\n  lastClientY: number | undefined;\n  // 背景透明度\n  backdropOpacity: number;\n  // 上次关闭的背景透明度\n  lastBackdropOpacity: number;\n  // 覆盖物可见度\n  overlayVisible: boolean;\n  // 可下拉关闭\n  canPullClose: boolean;\n  // 旋转集合\n  rotatingMap: Map<number, number>;\n};\n\nexport default class PhotoSlider extends React.Component<IPhotoSliderProps, PhotoSliderState> {\n  static displayName = 'PhotoSlider';\n\n  static defaultProps = {\n    maskClosable: true,\n    photoClosable: false,\n    bannerVisible: true,\n    introVisible: true,\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.index !== undefined && nextProps.index !== prevState.photoIndex) {\n      return {\n        photoIndex: nextProps.index,\n        translateX: -(window.innerWidth + horizontalOffset) * nextProps.index,\n      };\n    }\n    return null;\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      translateX: 0,\n      photoIndex: 0,\n      touched: false,\n      shouldTransition: true,\n\n      lastClientX: undefined,\n      lastClientY: undefined,\n      backdropOpacity: defaultOpacity,\n      lastBackdropOpacity: defaultOpacity,\n      overlayVisible: true,\n      canPullClose: true,\n\n      rotatingMap: new Map<number, number>(),\n    };\n  }\n\n  componentDidMount() {\n    const { index = 0 } = this.props;\n    this.setState({\n      translateX: index * -(window.innerWidth + horizontalOffset),\n      photoIndex: index,\n    });\n    window.addEventListener('keydown', this.handleKeyDown);\n    window.addEventListener('popstate', this.handleBack);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleClose = (evt?: React.MouseEvent | React.TouchEvent) => {\n    const { onClose } = this.props;\n    const { backdropOpacity } = this.state;\n    onClose(evt);\n    this.setState({\n      overlayVisible: true,\n      // 记录当前关闭时的透明度\n      lastBackdropOpacity: backdropOpacity,\n    });\n  };\n\n  handlePhotoTap = () => {\n    const { photoClosable } = this.props;\n    if (photoClosable) {\n      this.handleClose();\n    } else {\n      this.setState(prevState => ({\n        overlayVisible: !prevState.overlayVisible,\n      }));\n    }\n  };\n\n  handlePhotoMaskTap = () => {\n    const { maskClosable } = this.props;\n    if (maskClosable) {\n      this.handleClose();\n    }\n  };\n\n  handleResize = () => {\n    const { innerWidth } = window;\n    this.setState(({ photoIndex }) => {\n      return {\n        translateX: -(innerWidth + horizontalOffset) * photoIndex,\n        lastClientX: undefined,\n        lastClientY: undefined,\n        shouldTransition: false,\n      };\n    });\n  };\n\n  handleRotate = (rotating: number) => {\n    const { photoIndex, rotatingMap } = this.state;\n    rotatingMap.set(photoIndex, rotating);\n    this.setState({\n      rotatingMap,\n    });\n  };\n\n  handleKeyDown = (evt: KeyboardEvent) => {\n    const { visible } = this.props;\n    if (visible) {\n      switch (evt.key) {\n        case 'ArrowLeft':\n          this.handlePrevious(false);\n          break;\n        case 'ArrowRight':\n          this.handleNext(false);\n          break;\n        case 'Escape':\n          this.handleClose();\n          break;\n      }\n    }\n  };\n\n  handleBack = (evt: KeyboardEvent) => {\n    evt.stopPropagation();\n    console.log(\"范湖一\")\n  };\n\n  handleReachVerticalMove = (clientY, scale) => {\n    this.setState(({ lastClientY, backdropOpacity }) => {\n      if (lastClientY === undefined) {\n        return {\n          touched: true,\n          lastClientY: clientY,\n          backdropOpacity,\n          canPullClose: true,\n        };\n      }\n      const offsetClientY = Math.abs(clientY - lastClientY);\n      const opacity = Math.max(Math.min(defaultOpacity, defaultOpacity - offsetClientY / 100 / 4), 0);\n      return {\n        touched: true,\n        lastClientY,\n        backdropOpacity: scale === 1 ? opacity : defaultOpacity,\n        canPullClose: scale === 1,\n      };\n    });\n  };\n\n  handleReachHorizontalMove = clientX => {\n    const { innerWidth } = window;\n    const { images } = this.props;\n    this.setState(({ lastClientX, translateX, photoIndex }) => {\n      if (lastClientX === undefined) {\n        return {\n          touched: true,\n          lastClientX: clientX,\n          translateX,\n          shouldTransition: true,\n        };\n      }\n      const originOffsetClientX = clientX - lastClientX;\n      let offsetClientX = originOffsetClientX;\n\n      // 第一张和最后一张超出距离减半\n      if (\n        (photoIndex === 0 && originOffsetClientX > 0) ||\n        (photoIndex === images.length - 1 && originOffsetClientX < 0)\n      ) {\n        offsetClientX = originOffsetClientX / 2;\n      }\n      return {\n        touched: true,\n        lastClientX: lastClientX,\n        translateX: -(innerWidth + horizontalOffset) * photoIndex + offsetClientX,\n        shouldTransition: true,\n      };\n    });\n  };\n\n  handleIndexChange = (photoIndex: number, shouldTransition: boolean = true) => {\n    const singlePageWidth = window.innerWidth + horizontalOffset;\n    const translateX = -singlePageWidth * photoIndex;\n    this.setState({\n      touched: false,\n      lastClientX: undefined,\n      lastClientY: undefined,\n      translateX,\n      photoIndex,\n      shouldTransition,\n    });\n    const { onIndexChange } = this.props;\n    if (onIndexChange) {\n      onIndexChange(photoIndex);\n    }\n  };\n\n  handlePrevious = (shouldTransition?: boolean) => {\n    const { photoIndex } = this.state;\n    if (photoIndex > 0) {\n      this.handleIndexChange(photoIndex - 1, shouldTransition);\n    }\n  };\n\n  handleNext = (shouldTransition?: boolean) => {\n    const { images } = this.props;\n    const { photoIndex } = this.state;\n    if (photoIndex < images.length - 1) {\n      this.handleIndexChange(photoIndex + 1, shouldTransition);\n    }\n  };\n\n  handleReachMove = (reachState: ReachTypeEnum, clientX: number, clientY: number, scale?: number) => {\n    if (reachState === ReachTypeEnum.XReach) {\n      this.handleReachHorizontalMove(clientX);\n    } else if (reachState === ReachTypeEnum.YReach) {\n      this.handleReachVerticalMove(clientY, scale);\n    }\n  };\n\n  handleReachUp = (clientX: number, clientY: number) => {\n    const { images } = this.props;\n    const { lastClientX = clientX, lastClientY = clientY, photoIndex, overlayVisible, canPullClose } = this.state;\n\n    const offsetClientX = clientX - lastClientX;\n    const offsetClientY = clientY - lastClientY;\n    let willClose = false;\n    // 下一张\n    if (offsetClientX < -maxMoveOffset && photoIndex < images.length - 1) {\n      this.handleIndexChange(photoIndex + 1);\n      return;\n    }\n    // 上一张\n    if (offsetClientX > maxMoveOffset && photoIndex > 0) {\n      this.handleIndexChange(photoIndex - 1);\n      return;\n    }\n    const singlePageWidth = window.innerWidth + horizontalOffset;\n\n    // 当前偏移\n    let currentTranslateX = -singlePageWidth * photoIndex;\n    let currentPhotoIndex = photoIndex;\n\n    if (Math.abs(offsetClientY) > window.innerHeight * 0.14 && canPullClose) {\n      willClose = true;\n      this.handleClose();\n    }\n    this.setState({\n      touched: false,\n      translateX: currentTranslateX,\n      photoIndex: currentPhotoIndex,\n      lastClientX: undefined,\n      lastClientY: undefined,\n      backdropOpacity: defaultOpacity,\n      overlayVisible: willClose ? true : overlayVisible,\n    });\n  };\n\n  render() {\n    const {\n      images,\n      visible,\n      className,\n      maskClassName,\n      viewClassName,\n      imageClassName,\n      bannerVisible,\n      introVisible,\n      overlayRender,\n      toolbarRender,\n      loadingElement,\n      brokenElement,\n    } = this.props;\n    const {\n      translateX,\n      touched,\n      photoIndex,\n      backdropOpacity,\n      lastBackdropOpacity,\n      overlayVisible,\n      rotatingMap,\n      shouldTransition,\n    } = this.state;\n    const imageLength = images.length;\n    const currentImage = images.length ? images[photoIndex] : undefined;\n    const transform = `translate3d(${translateX}px, 0px, 0)`;\n    // Overlay\n    const overlayIntro = currentImage && currentImage.intro;\n\n    return (\n      <VisibleAnimationHandle visible={visible} currentImage={currentImage}>\n        {({ photoVisible, showAnimateType, originRect, onShowAnimateEnd }) => {\n          if (photoVisible) {\n            const { innerWidth } = window;\n            const currentOverlayVisible = overlayVisible && showAnimateType === ShowAnimateEnum.None;\n            // 关闭过程中使用下拉保存的透明度\n            const currentOpacity = visible ? backdropOpacity : lastBackdropOpacity;\n            // 覆盖物参数\n            const overlayParams: overlayRenderProps = {\n              images,\n              index: photoIndex,\n              visible,\n              onClose: this.handleClose,\n              onIndexChange: this.handleIndexChange,\n              overlayVisible: currentOverlayVisible,\n              onRotate: this.handleRotate,\n              rotate: rotatingMap.get(photoIndex) || 0,\n            };\n            return (\n              <SlideWrap\n                className={classNames(\n                  {\n                    'PhotoView-PhotoSlider__clean': !currentOverlayVisible,\n                    'PhotoView-PhotoSlider__willClose': !visible,\n                  },\n                  className,\n                )}\n                role=\"dialog\"\n                id=\"PhotoView_Slider\"\n                onClick={e => e.stopPropagation()}\n              >\n                <div\n                  className={classNames('PhotoView-PhotoSlider__Backdrop', maskClassName, {\n                    'PhotoView-PhotoSlider__fadeIn': showAnimateType === ShowAnimateEnum.In,\n                    'PhotoView-PhotoSlider__fadeOut': showAnimateType === ShowAnimateEnum.Out,\n                  })}\n                  style={{\n                    background: `rgba(0, 0, 0, ${currentOpacity})`,\n                  }}\n                  onAnimationEnd={onShowAnimateEnd}\n                />\n                {bannerVisible && (\n                  <div className=\"PhotoView-PhotoSlider__BannerWrap\">\n                    <div className=\"PhotoView-PhotoSlider__Counter\">\n                      {photoIndex + 1} / {imageLength}\n                    </div>\n                    <div className=\"PhotoView-PhotoSlider__BannerRight\">\n                      {toolbarRender && toolbarRender(overlayParams)}\n                      <Close className=\"PhotoView-PhotoSlider__toolbarIcon\" onClick={this.handleClose} />\n                    </div>\n                  </div>\n                )}\n                {images\n                  .slice(\n                    // 加载相邻三张\n                    Math.max(photoIndex - 1, 0),\n                    Math.min(photoIndex + 2, imageLength + 1),\n                  )\n                  .map((item: dataType, index) => {\n                    // 截取之前的索引位置\n                    const realIndex = photoIndex === 0 ? photoIndex + index : photoIndex - 1 + index;\n                    return (\n                      <PhotoView\n                        key={item.key || realIndex}\n                        src={item.src}\n                        intro={item.intro}\n                        onReachMove={this.handleReachMove}\n                        onReachUp={this.handleReachUp}\n                        onPhotoTap={this.handlePhotoTap}\n                        onMaskTap={this.handlePhotoMaskTap}\n                        viewClassName={viewClassName}\n                        className={imageClassName}\n                        style={{\n                          left: `${(innerWidth + horizontalOffset) * realIndex}px`,\n                          WebkitTransform: transform,\n                          transform,\n                          transition:\n                            touched || !shouldTransition\n                              ? undefined\n                              : 'transform 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)',\n                        }}\n                        loadingElement={loadingElement}\n                        brokenElement={brokenElement}\n                        onPhotoResize={this.handleResize}\n                        isActive={photoIndex === realIndex}\n                        showAnimateType={showAnimateType}\n                        originRect={originRect}\n                        rotate={rotatingMap.get(realIndex) || 0}\n                      />\n                    );\n                  })}\n                {!isTouchDevice && bannerVisible && (\n                  <>\n                    {photoIndex !== 0 && (\n                      <div className=\"PhotoView-PhotoSlider__ArrowLeft\" onClick={() => this.handlePrevious(false)}>\n                        <ArrowLeft />\n                      </div>\n                    )}\n                    {photoIndex + 1 < imageLength && (\n                      <div className=\"PhotoView-PhotoSlider__ArrowRight\" onClick={() => this.handleNext(false)}>\n                        <ArrowRight />\n                      </div>\n                    )}\n                  </>\n                )}\n                {Boolean(introVisible && overlayIntro) && (\n                  <div className=\"PhotoView-PhotoSlider__FooterWrap\">{overlayIntro}</div>\n                )}\n                {overlayRender && overlayRender(overlayParams)}\n              </SlideWrap>\n            );\n          }\n          return null;\n        }}\n      </VisibleAnimationHandle>\n    );\n  }\n}\n","import React from 'react';\nimport PhotoContext, { onShowType, addItemType, removeItemType } from './photo-context';\nimport PhotoSlider from './PhotoSlider';\nimport { dataType, IPhotoProviderBase } from './types';\n\nexport interface IPhotoProvider extends IPhotoProviderBase {\n  children: React.ReactNode;\n}\n\ntype PhotoProviderState = {\n  images: dataType[];\n  visible: boolean;\n  index: number;\n  onShow: onShowType;\n  addItem: addItemType;\n  removeItem: removeItemType;\n};\n\nexport default class PhotoProvider extends React.Component<IPhotoProvider, PhotoProviderState> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      images: [],\n      visible: false,\n      index: 0,\n      addItem: this.handleAddItem,\n      removeItem: this.handleRemoveItem,\n      onShow: this.handleShow,\n    };\n  }\n\n  handleAddItem: addItemType = imageItem => {\n    this.setState(prev => ({\n      images: prev.images.concat(imageItem),\n    }));\n  };\n\n  handleRemoveItem = (key: string) => {\n    this.setState(({ images, index }) => {\n      const nextImages = images.filter(item => item.key !== key);\n      const nextEndIndex = nextImages.length - 1;\n      return {\n        images: nextImages,\n        index: Math.min(nextEndIndex, index),\n      };\n    });\n  };\n\n  handleShow = (key: string) => {\n    const { images } = this.state;\n    this.setState({\n      visible: true,\n      index: images.findIndex(item => item.key === key),\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  handleIndexChange = (index: number) => {\n    this.setState({\n      index,\n    });\n  };\n\n  render() {\n    const { children, ...restProps } = this.props;\n    const { images, visible, index } = this.state;\n\n    return (\n      <PhotoContext.Provider value={this.state}>\n        {children}\n        <PhotoSlider\n          images={images}\n          visible={visible}\n          index={index}\n          onIndexChange={this.handleIndexChange}\n          onClose={this.handleClose}\n          {...restProps}\n        />\n      </PhotoContext.Provider>\n    );\n  }\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nmodule.exports = uniqueId;\n","import React from 'react';\nimport uniqueId from 'lodash.uniqueid';\nimport isTouchDevice from './utils/isTouchDevice';\nimport PhotoContext, { PhotoContextType } from './photo-context';\n\nexport interface IPhotoConsumer {\n  src: string;\n  intro?: React.ReactNode;\n  children?: React.ReactElement<any>;\n}\n\nconst PhotoConsumer: React.FC<IPhotoConsumer> = ({ src, intro, children }) => {\n  const photoContext = React.useContext<PhotoContextType>(PhotoContext);\n  const key = React.useMemo<string>(() => uniqueId(), []);\n  const [position, updatePosition] = React.useState<{\n    clientX: number | undefined;\n    clientY: number | undefined;\n  }>({\n    clientX: undefined,\n    clientY: undefined,\n  });\n  const photoTriggerRef = React.useRef<HTMLElement | null>(null);\n\n  React.useEffect(() => {\n    photoContext.addItem({\n      key,\n      src,\n      originRef: photoTriggerRef.current,\n      intro,\n    });\n    return () => {\n      photoContext.removeItem(key);\n    };\n  }, []);\n\n  function handleTouchStart(e) {\n    const { clientX, clientY } = e.touches[0];\n    updatePosition({\n      clientX,\n      clientY,\n    });\n    if (children) {\n      const { onTouchStart } = children.props;\n      if (onTouchStart) {\n        onTouchStart(e);\n      }\n    }\n  }\n\n  function handleTouchEnd(e) {\n    const { clientX, clientY } = e.changedTouches[0];\n    if (position.clientX === clientX && position.clientY === clientY) {\n      photoContext.onShow(key);\n    }\n    if (children) {\n      const { onTouchEnd } = children.props;\n      if (onTouchEnd) {\n        onTouchEnd(e);\n      }\n    }\n  }\n\n  function handleClick(e) {\n    photoContext.onShow(key);\n    if (children) {\n      const { onClick } = children.props;\n      if (onClick) {\n        onClick(e);\n      }\n    }\n  }\n\n  if (children) {\n    return React.Children.only(\n      React.cloneElement(\n        children,\n        isTouchDevice\n          ? {\n              onTouchStart: handleTouchStart,\n              onTouchEnd: handleTouchEnd,\n              ref: photoTriggerRef,\n            }\n          : { onClick: handleClick, ref: photoTriggerRef },\n      ),\n    );\n  }\n  return null;\n};\n\nexport default PhotoConsumer;\n"],"names":["global","debounce","symbolTag","freeGlobal","freeSelf","root","objectProto","objectToString","isSymbol","isObjectLike","uniqueId"],"mappings":"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"}